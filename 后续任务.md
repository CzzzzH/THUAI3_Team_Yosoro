# 后续任务（ddl：5月10日）

## Part 1  动态连续空间寻路

### 预期目标:

- 实现八方向的寻路，可以适应动态的地图变化（比如视野中出现了人和已知的陷阱，这都是需要绕开的），且不会被卡，就算意外被卡也能通过自身和障碍物的关系分析来解除被卡的状态（自行调试）

- 尽量选择最优的路径

**主要接口：** 给定当前位置和目标位置（目标位置可以是**任意类型**方格）（示例中均为XYIPosition，即整数坐标类型，实际根据实现情况而定），返回路径，路径仅需要包含**路径长度**以及**当前需要移动的方向**即可（因为每一帧移动前都会调用这个寻路函数）

```cpp
Path FindPath(XYIPosition start, XYIPosition end)
```

**可选接口：** 给定物体列表，更新地图信息，返回更新失败与否。用于完善寻路的动态性（基本为视野内目标，或者通过队友无线电传送得到的目标列表）。[ 如果不实现这个接口，需要在寻路函数中自行调用游戏内接口完成地图信息更新 ]

```cpp
bool UpdateMap(std::vector<Obj> obj_list)
```

## Part 2 道具评估系统

### 预期目标:

- 实现游戏棋局的价值评估系统，根据当前局面情况分析出所给物体的Value，有关设计的合理性和参数的选择可能需要进行大量测试。

- 主要需要考虑的要素有：**当前所有灶台的情况**（已放置菜品的类型、是否正在做菜(剩余做菜时间)、**当前任务列表**、**食物和道具的重要性**（前者主要取决于前面的两个要素，后者主要取决于道具本身的价值以及自身状态），**玩家职业**

- 需要用到的信息，请直接调用player.cpp中的全局变量和游戏所给接口

**主要接口：** 给定物体列表（包括道具、返回一个Struct, 包含Value最高的Obj以及其Value（Value < 0时不捡取任何物品）

```cpp
ObjValue parseObject(std::vector<Obj> obj_list)
```

## Part 3 无线电

### 预期目标:

- 实现两个友军玩家的无线电收发（编码方式自行选择）

- 目前暂时需要完成**地图信息**、**灶台信息**的共享，对于前者，直接将视野内的信息转换成编码的一部分；对于后者，将Bag对象中的信息转换成，编码请使用**std::string**（给的通信接口就是这个）

**主要接口：** 给出需要共享的obj_list和背包（灶台信息）now_bag，转换成编码。收编码的时候根据收到的字符串解码，然后更新传参里的背包，返回共享的obj_list

```cpp
std::string GenerateMessage(std::vector<Obj> obj_list, Bag now_bag)
```

```cpp
std::vector<Obj> UpdateInfo(std::string message, Bag &now_bag)
```

## 其他说明：

由于13周周末就决赛了，所以我还是希望能在这周末（就是第12周周末）能把这些功能都完成，避免像复赛前一样最后两天赶着改代码。

当然如果时间不够用的话，可以不实现的跟要求一样完善，但是尽量在这周末前先给出一个能用的版本，方便我后续调试，然后再慢慢完善。

**注意：** 如果直接在player.cpp内实现(方便使用里面的全局变量和接口进行调试)，请不要直接commit改动，使用pull request推送请求，我这边好进行代码合并改动（因为这段时间我也会不断更新和改动player.cpp）
